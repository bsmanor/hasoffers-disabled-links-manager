<!-- Login Component, where network ID and token are entered, verified and updated in HoApiService -->
<app-login 
  *ngIf="!isValidated" 
  (validated)="onValidation($event)" 
  fxLayout="row" style="width:100vw; height:100vh;" fxLayoutAlign="center center">
</app-login>

<!-- Filters Component. Will open if there are more than X number of disabled link rules in a network -->
<app-primary-filter 
  *ngIf="primaryFilter.open" 
  [totalCount]="totalCount" 
  (filtersEmt)="onFiltersReceived($event)"
   fxLayout="row" style="width:100vw; height:100vh;" fxLayoutAlign="center center">
</app-primary-filter>


<!-- Actual disabled links data to be shown -->

<div fxLayout="column" fxLayoutAlign="center center" *ngIf="disabledLinks.length > 0">

  <!-- Internal Filters -->
  <app-internal-filters [filters]="filters" (filterEmt)="onInternalFilter($event)" style="position:absolute; top:0px; display:block; z-index:10;"></app-internal-filters>

  <mat-list fxLayout="column wrap" fxLayoutGap="3px"  style="text-align:center; position:relative; top:50px;" dense>

    <!-- HEADERS -->
    <mat-list-item fxLayout="row" fxLayoutGap="10px" style="font-weight: bold"> 
      <div class="border-right" fxFlex="1 1 100px">RULE ID</div>
      <div class="border-right" fxFlex="1 1 100px">OFFER</div>
      <div class="border-right" fxFlex="1 1 100px">AFFILIATE</div>
      <div class="border-right" fxFlex="1 1 150px">SUB ID 1</div>
      <div class="border-right" fxFlex="1 1 150px">SUB ID 2</div>
      <div class="border-right" fxFlex="1 1 150px">SUB ID 3</div>
      <div class="border-right" fxFlex="1 1 150px">SUB ID 4</div>
      <div class="border-right" fxFlex="1 1 150px">SUB ID 5</div>
      <div class="border-right" fxFlex="1 1 150px">SOURCE</div>
      <div class="border-right" fxFlex="1 1 100px">
        <span style="position:relative;bottom:3px;">STRICT </span>
        <mat-icon matTooltip="Whether all parameters needs to match or only one of them is enough.">error_outline</mat-icon>
      </div>
    </mat-list-item>

    <div style="height:20px;"></div>



    <!-- DATA ROWS -->

    <!-- Loop through all disabled Links -->
    <ng-container *ngFor="let rule of disabledLinks">
      <!-- Show list item only if they match the filters queries -->
      <mat-list-item fxLayout="row" fxLayoutGap="10px">
          <div class="border-right" fxFlex="1 1 100px">{{rule.id}}</div>
          <div class="border-right" fxFlex="1 1 100px">{{rule.offer_id}}</div>
          <div class="border-right" fxFlex="1 1 100px">{{rule.affiliate_id}}</div>
          <div class="border-right" fxFlex="1 1 150px">{{rule.aff_info1 | limitCharacters: 10}}</div>
          <div class="border-right" fxFlex="1 1 150px">{{rule.aff_info2 | limitCharacters: 10}}</div>
          <div class="border-right" fxFlex="1 1 150px">{{rule.aff_info3 | limitCharacters: 10}}</div>
          <div class="border-right" fxFlex="1 1 150px">{{rule.aff_info4 | limitCharacters: 10}}</div>
          <div class="border-right" fxFlex="1 1 150px">{{rule.aff_info5 | limitCharacters: 10}}</div>
          <div class="border-right" fxFlex="1 1 150px">{{rule.source | limitCharacters: 10}}</div>
          <div class="border-right" fxFlex="1 1 100px">{{rule.strict === '1' ? 'STRICT' : 'NOT STRICT'}}</div>
            
          <div fxFlex="100px">
            <button 
              mat-raised-button 
              color="warn" 
              (click)="deleteDisabledLink(rule.id)"
              style="float:right"
            >
              DELETE
            </button>
          </div>
    
          <mat-divider></mat-divider>
        </mat-list-item>
      </ng-container>
  </mat-list>

  <mat-paginator 
    [length]="totalCount"
    [pageSize]="pageSize"
    [pageIndex]="pageIndex"
    [pageSizeOptions]="pageSizeOptions"
    showFirstLastButtons="true"
    (page)="pageEvent = handlePaginationChange($event)">
  </mat-paginator>

</div>

